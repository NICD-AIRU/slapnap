---
title: "Logo plot"
author: "David Benkeser"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: bookdown::html_document2
---

```{r setup, include=FALSE, cache = TRUE}
source("/home/lib/report_preamble.R")
```

```{r combinedvarimpindividualfeatures}
knitr::kable(imp_overall, caption = "Variable importance of individual features, defined by being label as 'important' for prediction of at least two of the outcomes considered; these outcomes are listed in the table.")
```

The distribution of amino acid at the important residues are shown for sensitive and resistant viruses in Figures XXX and YYY. 

```{r logoPlot1, fig.cap = "Distribution of amino acids at important residues for estimated sensitive versus resistant viruses", fig.height = 12, fig.width = 10}
source("plotting_functions.R")
if(!is.na(imp_overall$Variable[1])){
  all_imp_vars <- imp_overall$Variable
  imp_aa_vars <- imp_overall$Variable[grepl("hxb", imp_overall$Variable)]
  aa_positions <- sort(as.numeric(stringr::word(imp_aa_vars, 2 , 2, sep = '\\.')))
  make_logo_plot(data = dat, outcome_name = "dichotomous.1", aa_positions = aa_positions)
}else{
  print("No features qualified as important for predicting multiple outcomes")
}
```